<ValueTree xmlns="http://v8.1c.ru/8.1/data/core" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ValueTree">
	<column>
		<Name xsi:type="xs:string">Использовать</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Кнопка</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Служебные</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Формула</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">СлужебныеТекст</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Сохранение</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Загрузка</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">КоллекцияТЧ</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Регламент</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">ИмяКнопки</Name>
		<ValueType/>
	</column>
	<row>
		<Value xsi:type="xs:boolean">false</Value>
		<Value xsi:type="xs:string">Удаление архивных документов</Value>
		<Value xsi:type="xs:string">		//++Удаление Docrobot документов, записей из РС DR_ЦепочкиДокументов и РС DR_События по значению из доп констант EDI_СрокУдаленияАрхивныхДокументовПоДатеЗаказа 
		
		EDI_СрокУдаленияАрхивныхДокументовПоДатеЗаказа = Настройка_Параметр_Прочитать("EDI_СрокУдаленияАрхивныхДокументовПоДатеЗаказа");  
		ПериодСвязиДокументов = Настройка_Параметр_Прочитать("EDI_ПериодСвязиДокументов");  
		
		ВыбранныеСтроки = ?(ВыбранныеСтроки = Неопределено, Новый Массив, ВыбранныеСтроки); 
		
		ИсключитьВидыДокументов = Новый Массив; 
		ИсключитьВидыДокументов.Добавить("CONDRA_Исходящий");
		ИсключитьВидыДокументов.Добавить("CONDRA_Входящий");                                                                                    
		ИсключитьВидыДокументов.Добавить("PRICAT_Исходящий"); 
		ИсключитьВидыДокументов.Добавить("PRICAT_Входящий"); 
		ИсключитьВидыДокументов.Добавить("УстановкаЦенНоменклатуры_Исходящий"); 
		ИсключитьВидыДокументов.Добавить("УстановкаЦенНоменклатуры_Входящий");                                                                                   
		
		Если ЗначениеЗаполнено(EDI_СрокУдаленияАрхивныхДокументовПоДатеЗаказа) Тогда  
			
			МассивИдентификаторов = Новый Массив;
			Для Каждого Стр Из ВыбранныеСтроки Цикл
				МассивИдентификаторов.Добавить(Стр.ИдентификаторЦепочки);
			КонецЦикла;
			
			Запрос = Новый Запрос;
			Запрос.Текст = "ВЫБРАТЬ
			               |	DR_ЦепочкиДокументов.ИдентификаторЦепочки КАК ИдентификаторЦепочки
			               |ИЗ
			               |	РегистрСведений.DR_ЦепочкиДокументов КАК DR_ЦепочкиДокументов
			               |		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.DR_События КАК DR_События
			               |		ПО DR_ЦепочкиДокументов.ИдентификаторЦепочки = DR_События.ИдентификаторЦепочки
			               |			И (РАЗНОСТЬДАТ(DR_ЦепочкиДокументов.ДатаЗаказа, DR_События.ДатаЗаписи, ДЕНЬ) МЕЖДУ 0 И &amp;ПериодСвязиДокументов)
			               |ГДЕ
			               |	DR_События.Статус = ""Архивный""
			               |	И ВЫБОР
			               |			КОГДА РАЗНОСТЬДАТ(&amp;ТекДата, DR_ЦепочкиДокументов.ДатаЗаказа, ДЕНЬ) &lt; 0
			               |				ТОГДА -РАЗНОСТЬДАТ(&amp;ТекДата, DR_ЦепочкиДокументов.ДатаЗаказа, ДЕНЬ)
			               |			ИНАЧЕ РАЗНОСТЬДАТ(&amp;ТекДата, DR_ЦепочкиДокументов.ДатаЗаказа, ДЕНЬ)
			               |		КОНЕЦ &gt; &amp;ПериодАрхивации
			               |	И DR_События.ИдентификаторЦепочки В(&amp;ИдентификаторыЦепочек)
			               |	И НЕ DR_События.ВидДокумента В (&amp;ИсключитьВидыДокументов)
			               |
			               |СГРУППИРОВАТЬ ПО
			               |	DR_ЦепочкиДокументов.ИдентификаторЦепочки
			               |;
			               |
			               |////////////////////////////////////////////////////////////////////////////////
			               |ВЫБРАТЬ
			               |	DR_События.Документ КАК Документ
			               |ИЗ
			               |	РегистрСведений.DR_ЦепочкиДокументов КАК DR_ЦепочкиДокументов
			               |		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.DR_События КАК DR_События
			               |		ПО DR_ЦепочкиДокументов.ИдентификаторЦепочки = DR_События.ИдентификаторЦепочки
			               |			И (РАЗНОСТЬДАТ(DR_ЦепочкиДокументов.ДатаЗаказа, DR_События.ДатаЗаписи, ДЕНЬ) МЕЖДУ 0 И &amp;ПериодСвязиДокументов)
			               |ГДЕ
			               |	DR_События.Статус = ""Архивный""
			               |	И ВЫБОР
			               |			КОГДА РАЗНОСТЬДАТ(&amp;ТекДата, DR_ЦепочкиДокументов.ДатаЗаказа, ДЕНЬ) &lt; 0
			               |				ТОГДА -РАЗНОСТЬДАТ(&amp;ТекДата, DR_ЦепочкиДокументов.ДатаЗаказа, ДЕНЬ)
			               |			ИНАЧЕ РАЗНОСТЬДАТ(&amp;ТекДата, DR_ЦепочкиДокументов.ДатаЗаказа, ДЕНЬ)
			               |		КОНЕЦ &gt; &amp;ПериодАрхивации
			               |	И DR_События.ИдентификаторЦепочки В(&amp;ИдентификаторыЦепочек)
			               |	И НЕ DR_События.ВидДокумента В (&amp;ИсключитьВидыДокументов)
			               |	И ТИПЗНАЧЕНИЯ(DR_События.Документ) = ТИП(Документ.DR_Документ)
			               |
			               |СГРУППИРОВАТЬ ПО
			               |	DR_События.Документ";
			
			Запрос.УстановитьПараметр("ТекДата",КонецДня(ТекущаяДата())); 
			Запрос.УстановитьПараметр("ПериодАрхивации",EDI_СрокУдаленияАрхивныхДокументовПоДатеЗаказа);  
			Запрос.УстановитьПараметр("ПериодСвязиДокументов", ПериодСвязиДокументов); 
			Если Не ВыбранныеСтроки.Количество() Тогда 
				Запрос.Текст = СтрЗаменить(Запрос.Текст,"И DR_События.ИдентификаторЦепочки В(&amp;ИдентификаторыЦепочек)","");
			КонецЕсли;
			Запрос.УстановитьПараметр("ИдентификаторыЦепочек", МассивИдентификаторов);
			Запрос.УстановитьПараметр("ИсключитьВидыДокументов", ИсключитьВидыДокументов);	
			
			МассивРезультатов = Запрос.ВыполнитьПакет();
			
			ВыборкаАрхивныхЗаписейРС  = МассивРезультатов[0].Выбрать();
			ВыборкаАрхивныхДокументов = МассивРезультатов[1].Выбрать();  
			
			Сч1 = 0;
			Пока ВыборкаАрхивныхДокументов.Следующий() Цикл 		
				УдаляемыйДокумент = ВыборкаАрхивныхДокументов.Документ.ПолучитьОбъект();
				УдаляемыйДокумент.Удалить();
				Сч1 = Сч1 + 1;
			КонецЦикла;	
			
			Сч2 = 0;
			Пока ВыборкаАрхивныхЗаписейРС.Следующий() Цикл
				Архив_DRСобытия = РегистрыСведений.DR_События.СоздатьНаборЗаписей();
				Архив_DRСобытия.Отбор.ИдентификаторЦепочки.Установить(ВыборкаАрхивныхЗаписейРС.ИдентификаторЦепочки);
				Архив_DRСобытия.Записать();
				
				DR_ЦепочкиДокументов = РегистрыСведений.DR_ЦепочкиДокументов.СоздатьНаборЗаписей();
				DR_ЦепочкиДокументов.Отбор.ИдентификаторЦепочки.Установить(ВыборкаАрхивныхЗаписейРС.ИдентификаторЦепочки);
				DR_ЦепочкиДокументов.Записать();	
				
				Сч2 = Сч2 + 1;
			КонецЦикла;	
			
			ТекстЛогаСобытий = "Удалено из архива "+ Сч2 + " записей в РС DR_ЦепочкиДокументов, " + Сч1 + " Docrobot документов";
			ЗаписьСтруктурыЛога = Вычислить("DR_EDI_ОбщегоНазначения.ЗаполненнаяЗаписьЛога(ТекстЛогаСобытий, ""Успешно"", ИмяСобытия)");
			МассивЛогаСобытий.Добавить(ЗаписьСтруктурыЛога);  
			
		КонецЕсли;
		
		//--
</Value>
		<Value xsi:type="xs:string"/>
		<Value xsi:type="xs:string"/>
		<Value xsi:type="xs:decimal">0</Value>
		<Value xsi:type="xs:decimal">0</Value>
		<Value xsi:type="ValueListType">
			<valueType/>
			<lastId xsi:type="xs:decimal">5</lastId>
			<item>
				<value xsi:type="xs:string">Прайс-лист</value>
				<id xsi:type="xs:decimal">0</id>
			</item>
			<item>
				<value xsi:type="xs:string">Поставщик</value>
				<id xsi:type="xs:decimal">1</id>
			</item>
			<item>
				<value xsi:type="xs:string">Неструкт. докум.</value>
				<id xsi:type="xs:decimal">2</id>
			</item>
			<item>
				<value xsi:type="xs:string">Покупатель</value>
				<id xsi:type="xs:decimal">3</id>
			</item>
			<item>
				<value xsi:type="xs:string">Синоним</value>
				<presentation>Удаление архивных документов</presentation>
				<checkState>1</checkState>
				<id xsi:type="xs:decimal">4</id>
			</item>
			<item>
				<value xsi:type="xs:string">ИмяКнопки</value>
				<presentation>ПроизвольныйУдалениеАрхивныхДокументов</presentation>
				<checkState>1</checkState>
				<id xsi:type="xs:decimal">5</id>
			</item>
		</Value>
		<Value xsi:type="ValueListType">
			<valueType/>
			<lastId xsi:type="xs:decimal">1</lastId>
			<item>
				<value xsi:type="xs:string"/>
				<presentation>ТекстЗапроса</presentation>
				<checkState>1</checkState>
				<id xsi:type="xs:decimal">0</id>
			</item>
		</Value>
		<Value xsi:type="xs:string">ПроизвольныйУдалениеАрхивныхДокументов</Value>
	</row>
</ValueTree>