ТекстЗапроса =  
"ВЫБРАТЬ
|	DR_НастройкиДополнительныеРеквизиты.Реквизит КАК Имя,
|	DR_НастройкиДополнительныеРеквизиты.Значение КАК Синоним
|ПОМЕСТИТЬ ВТ_ВидыДокументов
|ИЗ
|	Справочник.DR_Настройки.ДополнительныеРеквизиты КАК DR_НастройкиДополнительныеРеквизиты
|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.DR_Настройки КАК DR_Настройки
|		ПО DR_НастройкиДополнительныеРеквизиты.Ссылка = DR_Настройки.Ссылка
|ГДЕ
|	DR_Настройки.ВидНастройки = ""Перечисления""
|	И DR_Настройки.Наименование = ""ВидыДокументов""
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	DR_События.Документ КАК Документ,
|	DR_События.Идентификатор КАК Идентификатор,
|	DR_События.ВидДокумента КАК ВидДокумента
|ПОМЕСТИТЬ ВтИдентификаторыЮЗД
|ИЗ
|	РегистрСведений.DR_События КАК DR_События
|ГДЕ
|	DR_События.ИдентификаторЦепочки = &ИдентификаторЦепочки
|	И DR_События.ВидДокумента В (""ON_NSCHFDOPPR_01_Исходящий"", ""ON_NSCHFDOPPR_01_Испр_Исходящий"", ""ON_NSCHFDOPPRMARK_01_Исходящий"", ""ON_NSCHFDOPPRMARK_01_Испр_Исходящий"", ""ON_NSCHFDOPPRPROS_01_Исходящий"", ""ON_NSCHFDOPPRPROS_01_Испр_Исходящий"", ""ON_NKORSCHFDOPPR_01_Исходящий"", ""ON_NKORSCHFDOPPR_01_Испр_Исходящий"", ""ON_NKORSCHFDOPPRMARK_01_Исходящий"", ""ON_NKORSCHFDOPPRMARK_01_Испр_Исходящий"", ""ON_NKORSCHFDOPPRPROS_01_Исходящий"", ""ON_NKORSCHFDOPPRPROS_01_Испр_Исходящий"")
|
|СГРУППИРОВАТЬ ПО
|	DR_События.Документ,
|	DR_События.Идентификатор,
|	DR_События.ВидДокумента
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	DR_События.Документ КАК Документ,
|	DR_События.Идентификатор КАК Идентификатор,
|	DR_События.ВидДокумента КАК ВидДокумента,
|	DR_События.ИдентификаторЦепочки КАК ИдентификаторЦепочки
|ПОМЕСТИТЬ ВтДанныеЮЗД
|ИЗ
|	РегистрСведений.DR_События КАК DR_События
|ГДЕ
|	DR_События.ИдентификаторЦепочки = &ИдентификаторЦепочки
|	И DR_События.ВидДокумента В (""ON_NSCHFDOPPR_01_Исходящий"", ""ON_NSCHFDOPPR_01_Испр_Исходящий"", ""ON_NSCHFDOPPRMARK_01_Исходящий"", ""ON_NSCHFDOPPRMARK_01_Испр_Исходящий"", ""ON_NSCHFDOPPRPROS_01_Исходящий"", ""ON_NSCHFDOPPRPROS_01_Испр_Исходящий"", ""ON_NKORSCHFDOPPR_01_Исходящий"", ""ON_NKORSCHFDOPPR_01_Испр_Исходящий"", ""ON_NKORSCHFDOPPRMARK_01_Исходящий"", ""ON_NKORSCHFDOPPRMARK_01_Испр_Исходящий"", ""ON_NKORSCHFDOPPRPROS_01_Исходящий"", ""ON_NKORSCHFDOPPRPROS_01_Испр_Исходящий"")
|
|СГРУППИРОВАТЬ ПО
|	DR_События.Документ,
|	DR_События.Идентификатор,
|	DR_События.ВидДокумента,
|	DR_События.ИдентификаторЦепочки
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	DR_События.ИдентификаторЦепочки КАК ИдентификаторЦепочки,
|	ВЫБОР
|		КОГДА НЕ ВтДанныеЮЗД.Документ ЕСТЬ NULL
|			ТОГДА ВтДанныеЮЗД.Документ
|		ИНАЧЕ DR_События.Документ
|	КОНЕЦ КАК Документ,
|	ВЫБОР
|		КОГДА НЕ ВТ_ВидыДокументов.Имя ЕСТЬ NULL
|			ТОГДА ВТ_ВидыДокументов.Синоним
|		ИНАЧЕ DR_События.ВидДокумента
|	КОНЕЦ КАК ВидДокументаСиноним,
|	ВЫБОР
|		КОГДА DR_События.ВидДокумента = ""СчетФактура_Исходящий""
|			ТОГДА ЕСТЬNULL(ВтИдентификаторыЮЗД.ВидДокумента, DR_События.ВидДокумента)
|		ИНАЧЕ DR_События.ВидДокумента
|	КОНЕЦ КАК ВидДокумента,
|	ВЫБОР
|		КОГДА DR_События.ВидДокумента = ""ORDRSP_Исходящий""
|				ИЛИ DR_События.ВидДокумента = ""DESADV_Исходящий""
|			ТОГДА DR_События.Идентификатор
|		КОГДА НЕ ЕСТЬNULL(ВтДанныеЮЗД.Документ, ВтДанныеЮЗД_Вложенное.Документ) ЕСТЬ NULL
|			ТОГДА ЕСТЬNULL(ВтДанныеЮЗД.Документ, ВтДанныеЮЗД_Вложенное.Документ)
|		ИНАЧЕ DR_События.Документ
|	КОНЕЦ КАК ПредставлениеДокумента,
|	ВЫБОР
|		КОГДА DR_События.ВидДокумента В (""ON_NSCHFDOPPOKMARK_11_Исходящий"", ""ON_NSCHFDOPPOKPROS_11_Исходящий"", ""ON_NSCHFDOPPOK_11_Исходящий"", ""ON_NKORSCHFDOPPOK_11_Исходящий"", ""ON_NKORSCHFDOPPOKMARK_11_Исходящий"", ""ON_NKORSCHFDOPPOKPROS_11_Исходящий"", ""DP_IZVPOL_06_Исходящий"", ""DP_UVUTOCH_09_Исходящий"", ""DP_PRANNUL_22_Входящий"", ""DP_PRANNUL_22_Исходящий"", ""DP_UVUTOCH_24_Входящий"", ""DP_UVUTOCH_24_Исходящий"", ""DP_IZVPOL_23_Входящий"", ""DP_IZVPOL_23_Исходящий"", ""ON_NSCHFDOPPOKMARK_11_Входящий"", ""ON_NSCHFDOPPOKPROS_11_Входящий"", ""ON_NSCHFDOPPOK_11_Входящий"", ""ON_NKORSCHFDOPPOK_11_Входящий"", ""ON_NKORSCHFDOPPOKMARK_11_Входящий"", ""ON_NKORSCHFDOPPOKPROS_11_Входящий"", ""DP_IZVPOL_06_Входящий"", ""DP_UVUTOCH_09_Входящий"", ""DP_PRANNUL_22_Входящий"", ""DP_PRANNUL_22_Исходящий"", ""DP_UVUTOCH_24_Входящий"", ""DP_UVUTOCH_24_Исходящий"", ""DP_IZVPOL_23_Входящий"", ""DP_IZVPOL_23_Исходящий"")
|			ТОГДА ВтИдентификаторыЮЗД.Идентификатор
|		КОГДА DR_События.ВидДокумента = ""СчетФактура_Исходящий""
|			ТОГДА ЕСТЬNULL(ВтИдентификаторыЮЗД.Идентификатор, DR_События.Идентификатор)
|		ИНАЧЕ DR_События.Идентификатор
|	КОНЕЦ КАК Идентификатор,
|	ЕСТЬNULL(ВтДанныеЮЗД.Документ, ВтДанныеЮЗД_Вложенное.Документ) КАК ДокументЮЗД,
|	ЕСТЬNULL(ВтДанныеЮЗД.Идентификатор, ВтДанныеЮЗД_Вложенное.Идентификатор) КАК ИдентификаторЮЗД,
|	ЕСТЬNULL(ВтДанныеЮЗД.ВидДокумента, ВтДанныеЮЗД_Вложенное.ВидДокумента) КАК ВидДокументаЮЗД
|ИЗ
|	РегистрСведений.DR_События КАК DR_События
|		ЛЕВОЕ СОЕДИНЕНИЕ ВтИдентификаторыЮЗД КАК ВтИдентификаторыЮЗД
|		ПО DR_События.Документ = ВтИдентификаторыЮЗД.Документ
|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ВидыДокументов КАК ВТ_ВидыДокументов
|		ПО DR_События.ВидДокумента = ВТ_ВидыДокументов.Имя
|		ЛЕВОЕ СОЕДИНЕНИЕ ВтДанныеЮЗД КАК ВтДанныеЮЗД
|		ПО DR_События.ИдентификаторЦепочки = ВтДанныеЮЗД.ИдентификаторЦепочки
|			И (ВтДанныеЮЗД.Идентификатор = DR_События.ИдентификаторОснования)
|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.DR_События КАК DR_Сыобтия_Вложенное
|		ПО DR_События.ИдентификаторОснования = DR_Сыобтия_Вложенное.Идентификатор
|		ЛЕВОЕ СОЕДИНЕНИЕ ВтДанныеЮЗД КАК ВтДанныеЮЗД_Вложенное
|		ПО (DR_Сыобтия_Вложенное.ИдентификаторЦепочки = ВтДанныеЮЗД_Вложенное.ИдентификаторЦепочки)
|			И (ВтДанныеЮЗД_Вложенное.Идентификатор = DR_Сыобтия_Вложенное.ИдентификаторОснования)
|ГДЕ
|	DR_События.ИдентификаторЦепочки = &ИдентификаторЦепочки
|	И НЕ DR_События.ВидДокумента В (""DP_PDPOL_02_Входящий"", ""DP_PDPOL_07_Входящий"", ""DP_PDPOL_12_Входящий"", ""DP_PDOTPR_03_Входящий"", ""DP_PDOTPR_08_Входящий"", ""DP_PDOTPR_13_Входящий"", ""DP_PDPOL_14_Входящий"", ""DP_PDOTPR_15_Входящий"")
|
|УПОРЯДОЧИТЬ ПО
|	DR_События.ДатаЗаписи";
